<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <apiVersion>59.0</apiVersion>
    <choices>
        <name>ownerId</name>
        <choiceText>{!recordId.Owner.Name}</choiceText>
        <dataType>String</dataType>
    </choices>
    <decisions>
        <name>CheckLevel</name>
        <label>Check Level</label>
        <locationX>578</locationX>
        <locationY>134</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IfLevelIsCountryGroupingAccount</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.BLN_Level__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.BLN_CountryGroupingAccount</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RequiredFields</targetReference>
            </connector>
            <label>If level is country grouping account</label>
        </rules>
        <rules>
            <name>IfLevelIsIegalEntityAccount</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.BLN_Level__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.BLN_LegalEntityAccount</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RequiredFieldsforSiteAccount</targetReference>
            </connector>
            <label>If level is legal entity account</label>
        </rules>
    </decisions>
    <description>FOUK-593 Create a new screen flow that will create a child account from a parent</description>
    <dynamicChoiceSets>
        <name>AccountSourcePicklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>AccountSource</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>AccountTierTypePicklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>BLN_AccountTierType__c</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>CurrentSupplier1Picklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>BLN_CurrentSupplier1__c</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>CurrentSupplier2Picklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>BLN_CurrentSupplier2__c</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>CurrentSupplier3Picklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>BLN_CurrentSupplier3__c</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>IndustryPicklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Industry</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>SupplyStatusWithAutoglassPicklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>BLN_SupplyStatusWithAutoglass__c</picklistField>
        <picklistObject>Account</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>CurrentUserID</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>FaultMessage</name>
        <dataType>String</dataType>
        <expression>{!$Flow.FaultMessage}</expression>
    </formulas>
    <interviewLabel>Create a Child Account from Grandparent or Parent Account {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Create a Child Account from Grandparent or Parent Account</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>CreateChildAccount</name>
        <label>Create child account</label>
        <locationX>50</locationX>
        <locationY>350</locationY>
        <assignRecordIdToReference>LegalEntityAccountRecordId</assignRecordIdToReference>
        <connector>
            <targetReference>SuccessMessageForLEALevel</targetReference>
        </connector>
        <faultConnector>
            <targetReference>CreateExceptionRecords</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>AccountSource</field>
            <value>
                <elementReference>recordId.AccountSource</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_AccountTierType__c</field>
            <value>
                <elementReference>recordId.BLN_AccountTierType__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_AllowOpportunityOwnerChange__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_BudgetedAccount__c</field>
            <value>
                <elementReference>recordId.BLN_BudgetedAccount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ClientSteeringAbility__c</field>
            <value>
                <elementReference>recordId.BLN_ClientSteeringAbility__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ClientSubType__c</field>
            <value>
                <elementReference>recordId.BLN_ClientSubType__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ClientType__c</field>
            <value>
                <elementReference>recordId.BLN_ClientType__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_CurrentSupplier1__c</field>
            <value>
                <elementReference>recordId.BLN_CurrentSupplier1__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_CurrentSupplier2__c</field>
            <value>
                <elementReference>recordId.BLN_CurrentSupplier2__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_CurrentSupplier3__c</field>
            <value>
                <elementReference>recordId.BLN_CurrentSupplier3__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_CurrentSupplierNotes__c</field>
            <value>
                <elementReference>recordId.BLN_CurrentSupplierNotes__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ExternalContractRenewalDate__c</field>
            <value>
                <elementReference>recordId.BLN_ExternalContractRenewalDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_Level__c</field>
            <value>
                <elementReference>$Label.BLN_LegalEntityAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_NextCommunicationDate__c</field>
            <value>
                <elementReference>recordId.BLN_NextCommunicationDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_PriceReviewComments__c</field>
            <value>
                <elementReference>recordId.BLN_PriceReviewComments__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_PriceReviewDate__c</field>
            <value>
                <elementReference>recordId.BLN_PriceReviewDate__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_Status__c</field>
            <value>
                <elementReference>$Label.BLN_Prospect</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_SupplyStatusWithAutoglass__c</field>
            <value>
                <elementReference>recordId.BLN_SupplyStatusWithAutoglass__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Industry</field>
            <value>
                <elementReference>recordId.Industry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>AccountName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>recordId.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>recordId.RecordTypeId</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordCreates>
    <recordCreates>
        <name>CreateChildAccountForSiteAccount</name>
        <label>Create child account for site account</label>
        <locationX>578</locationX>
        <locationY>350</locationY>
        <assignRecordIdToReference>SitAccounRecordId</assignRecordIdToReference>
        <connector>
            <targetReference>SuccessMessageForSALevel</targetReference>
        </connector>
        <faultConnector>
            <targetReference>CreateExceptionRecordss</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>AccountSource</field>
            <value>
                <elementReference>recordId.AccountSource</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_Level__c</field>
            <value>
                <elementReference>$Label.BLN_SiteAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_Status__c</field>
            <value>
                <elementReference>$Label.BLN_Prospect</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>AccountNameOfSA</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>recordId.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>recordId.RecordTypeId</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordCreates>
    <recordCreates>
        <name>CreateExceptionRecords</name>
        <label>Create Exception Records</label>
        <locationX>314</locationX>
        <locationY>458</locationY>
        <connector>
            <targetReference>ErrorScreen</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>CurrentUserID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <elementReference>BLN_CreateaChildAccountfromGrandparentorParentAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>Exception</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>CreateChildAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>RecordIdIdentifier.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>CreateExceptionRecordss</name>
        <label>Create Exception Records</label>
        <locationX>842</locationX>
        <locationY>458</locationY>
        <connector>
            <targetReference>ErrorMessage</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>CurrentUserID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <elementReference>BLN_CreateaChildAccountfromGrandparentorParentAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>Exception</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>CreateChildAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>RecordIdIdentifier.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <screens>
        <name>ErrorMessage</name>
        <label>ErrorMessage</label>
        <locationX>842</locationX>
        <locationY>566</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>ErrorDisplay</name>
            <fieldText>&lt;p&gt;{!$Label.BLN_ErrorMessage}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ErrorScreen</name>
        <label>Error Screen</label>
        <locationX>314</locationX>
        <locationY>566</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>DisplayError</name>
            <fieldText>&lt;p&gt;{!$Label.BLN_ErrorMessage}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>RequiredFields</name>
        <label>Required Fields</label>
        <locationX>50</locationX>
        <locationY>242</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>CreateChildAccount</targetReference>
        </connector>
        <fields>
            <name>RequiredFields_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>RequiredFields_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>AccountName</name>
                    <dataType>String</dataType>
                    <fieldText>Account Name</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>12</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Submit</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>RequiredFieldsforSiteAccount</name>
        <label>Required Fields for Site Account</label>
        <locationX>578</locationX>
        <locationY>242</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>CreateChildAccountForSiteAccount</targetReference>
        </connector>
        <fields>
            <name>RequiredFieldsforSiteAccount_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>RequiredFieldsforSiteAccount_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>AccountNameOfSA</name>
                    <dataType>String</dataType>
                    <fieldText>Account Name</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>12</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Submit</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>SuccessMessageForLEALevel</name>
        <label>Success Message For LEA Level</label>
        <locationX>50</locationX>
        <locationY>458</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>LATLevel</name>
            <fieldText>&lt;p&gt;{!$Label.BLN_CreatedForLETLevel}&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;/{!LegalEntityAccountRecordId}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$Label.BLN_OpenRecord}&lt;/a&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>SuccessMessageForSALevel</name>
        <label>Success Message For SA Level</label>
        <locationX>578</locationX>
        <locationY>458</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>ForSA</name>
            <fieldText>&lt;p&gt;{!$Label.BLN_CreatedForSALevel}&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;/{!SitAccounRecordId}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$Label.BLN_OpenRecord}&lt;/a&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>452</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>CheckLevel</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>BLN_CreateaChildAccountfromGrandparentorParentAccount</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>BLN_CreateaChildAccountfromGrandparentorParentAccount</stringValue>
        </value>
    </variables>
    <variables>
        <name>ClientSubType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ClientType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Exception</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Exception</stringValue>
        </value>
    </variables>
    <variables>
        <name>LegalEntityAccountRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>RecordIdIdentifier</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>SitAccounRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
