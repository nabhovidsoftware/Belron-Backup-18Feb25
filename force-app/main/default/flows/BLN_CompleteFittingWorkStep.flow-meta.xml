<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <assignments>
        <name>add_Ids</name>
        <label>add Ids</label>
        <locationX>979</locationX>
        <locationY>3254</locationY>
        <assignmentItems>
            <assignToReference>addIDS</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>LoopElementPR</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_PR_recs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>add_Quantity</name>
        <label>add Quantity</label>
        <locationX>974</locationX>
        <locationY>2270</locationY>
        <assignmentItems>
            <assignToReference>Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopElementPR.QuantityRequired</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ProductChangeType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Product Upsold</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>update_PR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Quantity</name>
        <label>Assign Quantity</label>
        <locationX>666</locationX>
        <locationY>2486</locationY>
        <assignmentItems>
            <assignToReference>Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Quantity_Fitted</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ProductChangeType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Quantity Changed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>quantity_not_matched_condition</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>PR_is_not_Consumed</name>
        <label>PR is not Consumed</label>
        <locationX>1238</locationX>
        <locationY>2162</locationY>
        <assignmentItems>
            <assignToReference>LoopElementPR.BLN_ProductChangeType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Product Removed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>add_Ids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Store_Start_Time</name>
        <label>Store Start Time</label>
        <locationX>1172</locationX>
        <locationY>134</locationY>
        <assignmentItems>
            <assignToReference>FlowStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Id_Null_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>update_PR</name>
        <label>update PR</label>
        <locationX>721</locationX>
        <locationY>3062</locationY>
        <assignmentItems>
            <assignToReference>LoopElementPR.BLN_IsConsumed__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>LoopElementPR.BLN_QuantityUsedByTech__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>LoopElementPR.BLN_ProductChangeType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ProductChangeType</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>add_Ids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateCaseBoolran</name>
        <label>UpdateCaseBoolran</label>
        <locationX>534</locationX>
        <locationY>2702</locationY>
        <assignmentItems>
            <assignToReference>CaseBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>update_PR</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>No</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>Yes</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Additional_Parts_used</name>
        <label>Additional Parts used?</label>
        <locationX>545</locationX>
        <locationY>4130</locationY>
        <defaultConnector>
            <targetReference>If_SR_is_Approved_Partner</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Used</defaultConnectorLabel>
        <rules>
            <name>Used</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Have_you_used_any_additional_parts</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Yes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>add_products_additional</targetReference>
            </connector>
            <label>Used</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_case_Boolean</name>
        <label>check case Boolean</label>
        <locationX>182</locationX>
        <locationY>3554</locationY>
        <defaultConnector>
            <targetReference>Additional_Products</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Boolean_is_true</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CaseBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Case</targetReference>
            </connector>
            <label>Boolean is true</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_products_are_selected_or_not</name>
        <label>Check if products are selected or not?</label>
        <locationX>336</locationX>
        <locationY>1838</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Products_are_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SelectedChoices</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_through_PR_recs</targetReference>
            </connector>
            <label>Products are selected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_PR_is_selected</name>
        <label>Check PR is selected</label>
        <locationX>979</locationX>
        <locationY>2054</locationY>
        <defaultConnector>
            <targetReference>PR_is_not_Consumed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_if_PR_is_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_the_Product_to_fit</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>LoopElementPR.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Quantity_of_Selected_Product</targetReference>
            </connector>
            <label>Check if PR is selected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Quantity_of_Selected_Product</name>
        <label>Check Quantity of Selected Product</label>
        <locationX>721</locationX>
        <locationY>2162</locationY>
        <defaultConnector>
            <targetReference>add_Quantity</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>product_is_greater_than_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LoopElementPR.QuantityRequired</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Quantity_Screen</targetReference>
            </connector>
            <label>product is greater than 1</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_ST_Type</name>
        <label>Check ST Type</label>
        <locationX>765</locationX>
        <locationY>4538</locationY>
        <defaultConnector>
            <targetReference>Call_Aperture_Condition</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Type_is_mobile</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>STRecord.BLN_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>MOBILE</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Upsell_VAPs</targetReference>
            </connector>
            <label>Type is mobile</label>
        </rules>
        <rules>
            <name>Type_is_branch</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>STRecord.BLN_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>BRANCH</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Upsell_VAPS_For_Branch_Flow_1</targetReference>
            </connector>
            <label>Type is branch</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_whether_Work_Step_is_not_null</name>
        <label>Check whether Work Step is not null</label>
        <locationX>875</locationX>
        <locationY>1298</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_If_Work_Step_is_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Step_Rec</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Main_Product_Required_Recs</targetReference>
            </connector>
            <label>Check If Work Step is not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Clock_In_Check</name>
        <label>Clock In Check?</label>
        <locationX>875</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>InstructionsForCICO</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_01</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsCheckedIn</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Work_Step_Rec</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Id_Null_Check</name>
        <label>Id And UserId Null Check</label>
        <locationX>1172</locationX>
        <locationY>242</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_if_Id_is_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>UserId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Clock_In</targetReference>
            </connector>
            <label>Check if Id And UserId is not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_SR_is_Approved_Partner</name>
        <label>If SR is Approved Partner?</label>
        <locationX>545</locationX>
        <locationY>4430</locationY>
        <defaultConnector>
            <targetReference>Check_ST_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Approved Partner</defaultConnectorLabel>
        <rules>
            <name>Approved_Partner</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CurrentSR.BLN_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved Partner</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_final_PR</targetReference>
            </connector>
            <label>Approved Partner</label>
        </rules>
    </decisions>
    <decisions>
        <name>Product_Required_exist</name>
        <label>Product Required exist?</label>
        <locationX>545</locationX>
        <locationY>1514</locationY>
        <defaultConnector>
            <targetReference>No_product_is_required_to_fit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Does not Exist</defaultConnectorLabel>
        <rules>
            <name>Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ProductReqRecs</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Current_SR</targetReference>
            </connector>
            <label>Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Quantity_Checked</name>
        <label>Quantity Checked</label>
        <locationX>468</locationX>
        <locationY>2378</locationY>
        <defaultConnector>
            <targetReference>Assign_Quantity</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Quantity_not_correct</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Quantity_Fitted</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>LoopElementPR.QuantityRequired</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Quantity_Fitted</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_Screen</targetReference>
            </connector>
            <label>Quantity not correct</label>
        </rules>
    </decisions>
    <decisions>
        <name>quantity_not_matched_condition</name>
        <label>quantity not matched condition</label>
        <locationX>666</locationX>
        <locationY>2594</locationY>
        <defaultConnector>
            <targetReference>update_PR</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>not_matched</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LoopElementPR.QuantityRequired</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>Quantity</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateCaseBoolran</targetReference>
            </connector>
            <label>not matched</label>
        </rules>
    </decisions>
    <description>FOUK-3947 - Consumption of Used Parts (Complete Fitting)</description>
    <dynamicChoiceSets>
        <name>MainPRChoiceSet</name>
        <dataType>String</dataType>
        <displayField>BLN_ProductRequiredTitle__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentWorkStep.WorkOrderLineItemId</elementReference>
            </value>
        </filters>
        <filters>
            <field>BLN_IsConsumed__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>ProductRequired</object>
        <outputAssignments>
            <assignToReference>SelectedChoices</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <sortField>BLN_ProductCode__c</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>VAPSPRChoiceSet</name>
        <dataType>String</dataType>
        <displayField>BLN_ProductCode__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentWorkStep.ParentRecordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>BLN_IsVAPSProduct__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>BLN_IsConsumed__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>BLN_IsProductSelected__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>ProductRequired</object>
        <sortField>BLN_ProductCode__c</sortField>
        <sortOrder>Desc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>VanLocationName</name>
        <dataType>String</dataType>
        <expression>{!$Label.BLN_UnitedKingdom}</expression>
    </formulas>
    <interviewLabel>Complete Fitting 2 {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Complete Fitting</label>
    <loops>
        <name>Loop_through_PR_recs</name>
        <label>Loop through PR recs</label>
        <locationX>182</locationX>
        <locationY>1946</locationY>
        <assignNextValueToReference>LoopElementPR</assignNextValueToReference>
        <collectionReference>ProductReqRecs</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_PR_is_selected</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_PR_1</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>FieldServiceMobile</processType>
    <recordLookups>
        <name>Get_Current_SR</name>
        <label>Get Current SR</label>
        <locationX>336</locationX>
        <locationY>1622</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Complete_Fitting_Of_Main_Products</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputReference>CurrentSR</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>LocationId</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>RelatedRecordId</queriedFields>
        <queriedFields>BLN_Type__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_final_PR</name>
        <label>Get final PR</label>
        <locationX>545</locationX>
        <locationY>5030</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_the_Work_Step</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentWorkStep.WorkOrderLineItemId</elementReference>
            </value>
        </filters>
        <filters>
            <field>BLN_IsConsumed__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>ProductRequired</object>
        <outputReference>ListforUreathene</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>ProductName</queriedFields>
        <queriedFields>BLN_BondedNonBondedFormula__c</queriedFields>
        <queriedFields>BLN_DriveAwayTimeFormula__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Main_Product_Required_Recs</name>
        <label>Get Main Product Required Recs</label>
        <locationX>545</locationX>
        <locationY>1406</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Product_Required_exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentWorkStep.WorkOrderLineItemId</elementReference>
            </value>
        </filters>
        <filters>
            <field>BLN_IsConsumed__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>ProductRequired</object>
        <outputReference>ProductReqRecs</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>ProductName</queriedFields>
        <queriedFields>BLN_Status__c</queriedFields>
        <queriedFields>BLN_ProductCode__c</queriedFields>
        <queriedFields>BLN_IsConsumed__c</queriedFields>
        <queriedFields>Product2Id</queriedFields>
        <queriedFields>QuantityRequired</queriedFields>
        <queriedFields>QuantityUnitOfMeasure</queriedFields>
        <queriedFields>ParentRecordId</queriedFields>
        <queriedFields>ParentRecordType</queriedFields>
        <queriedFields>BLN_BondedNonBondedFormula__c</queriedFields>
        <queriedFields>BLN_DriveAwayTimeFormula__c</queriedFields>
        <queriedFields>BLN_ProductRequiredTitle__c</queriedFields>
        <queriedFields>BLN_QuantityUsedByTech__c</queriedFields>
        <queriedFields>BLN_ProductChangeType__c</queriedFields>
        <sortField>ProductRequiredNumber</sortField>
        <sortOrder>Asc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>get_Service_Territroy</name>
        <label>get Service Territroy</label>
        <locationX>875</locationX>
        <locationY>1082</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_work_order</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>woliRecord.ServiceTerritoryId</elementReference>
            </value>
        </filters>
        <object>ServiceTerritory</object>
        <outputReference>STRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>BLN_Type__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>get_woli</name>
        <label>get woli</label>
        <locationX>875</locationX>
        <locationY>974</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Service_Territroy</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentWorkStep.WorkOrderLineItemId</elementReference>
            </value>
        </filters>
        <object>WorkOrderLineItem</object>
        <outputReference>woliRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>WorkTypeId</queriedFields>
        <queriedFields>WorkOrderId</queriedFields>
        <queriedFields>ServiceTerritoryId</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>get_work_order</name>
        <label>get work order</label>
        <locationX>875</locationX>
        <locationY>1190</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_whether_Work_Step_is_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>woliRecord.WorkOrderId</elementReference>
            </value>
        </filters>
        <object>WorkOrder</object>
        <outputReference>WorkOrder</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CaseId</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Work_Step_Rec</name>
        <label>Get Work Step Rec</label>
        <locationX>875</locationX>
        <locationY>866</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_woli</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <object>WorkStep</object>
        <outputReference>CurrentWorkStep</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>WorkOrderLineItemId</queriedFields>
        <queriedFields>WorkOrderId</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>ParentRecordId</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Update_Case</name>
        <label>Update Case</label>
        <locationX>50</locationX>
        <locationY>3662</locationY>
        <connector>
            <targetReference>Additional_Products</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>WorkOrder.CaseId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>BLN_IsRepricingRequired__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_PR_1</name>
        <label>Update PR</label>
        <locationX>182</locationX>
        <locationY>3446</locationY>
        <connector>
            <targetReference>check_case_Boolean</targetReference>
        </connector>
        <inputReference>addIDS</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_the_Work_Step</name>
        <label>Update the Work Step</label>
        <locationX>545</locationX>
        <locationY>5138</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentWorkStep.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>EndTime</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StartTime</field>
            <value>
                <elementReference>FlowStartTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <object>WorkStep</object>
    </recordUpdates>
    <screens>
        <name>Additional_Products</name>
        <label>Additional Products Confirmation</label>
        <locationX>545</locationX>
        <locationY>4022</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Additional_Parts_used</targetReference>
        </connector>
        <fields>
            <name>Have_you_used_any_additional_parts</name>
            <choiceReferences>Yes</choiceReferences>
            <choiceReferences>No</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Have you used any additional parts?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Complete_Fitting_Of_Main_Products</name>
        <label>Fit Job Products</label>
        <locationX>336</locationX>
        <locationY>1730</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Check_if_products_are_selected_or_not</targetReference>
        </connector>
        <fields>
            <name>Select_the_Product_to_fit</name>
            <choiceReferences>MainPRChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Select the Product to fit</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Error_Screen</name>
        <label>Error Screen</label>
        <locationX>270</locationX>
        <locationY>2486</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Quantity_Screen</targetReference>
        </connector>
        <fields>
            <name>ErrorMessage</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Please Select Correct Quantity &lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Next</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>InstructionsForCICO</name>
        <label>InstructionsForCICO</label>
        <locationX>963</locationX>
        <locationY>566</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Calling_CICO_Flow</targetReference>
        </connector>
        <fields>
            <name>OpenCICO</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;Before performing any operation you must need to &quot;Clock-In&quot; first. Please click Next to &quot;Clock-In&quot;&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>No_product_is_required_to_fit</name>
        <label>No product is required to fit.</label>
        <locationX>754</locationX>
        <locationY>1622</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Additional_Products</targetReference>
        </connector>
        <fields>
            <name>NoProduct</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: small; font-family: Arial, Helvetica, sans-serif; color: rgb(34, 34, 34);&quot;&gt;No product is required to fit.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Quantity_Screen</name>
        <label>Quantity Screen</label>
        <locationX>468</locationX>
        <locationY>2270</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Quantity_Checked</targetReference>
        </connector>
        <fields>
            <name>DisplayProduct</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;{!LoopElementPR.ProductName}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;{!LoopElementPR.BLN_ProductCode__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;Quantity Allocated - {!LoopElementPR.QuantityRequired}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Quantity_Fitted</name>
            <dataType>Number</dataType>
            <fieldText>Quantity Fitted</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <scale>0</scale>
        </fields>
        <nextOrFinishButtonLabel>Next</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>1046</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Store_Start_Time</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>add_products_additional</name>
        <label>add products additional</label>
        <locationX>413</locationX>
        <locationY>4238</locationY>
        <connector>
            <targetReference>If_SR_is_Approved_Partner</targetReference>
        </connector>
        <flowName>BLN_AddAdditionalProducts</flowName>
        <inputAssignments>
            <name>UserId</name>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WoliRec</name>
            <value>
                <elementReference>woliRecord</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Call_Aperture_Condition</name>
        <label>Call Aperture Condition</label>
        <locationX>765</locationX>
        <locationY>4838</locationY>
        <connector>
            <targetReference>Get_final_PR</targetReference>
        </connector>
        <flowName>BLN_ApertureCondition</flowName>
        <inputAssignments>
            <name>WoliRecord</name>
            <value>
                <elementReference>woliRecord</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Calling_CICO_Flow</name>
        <label>Calling CICO Flow</label>
        <locationX>963</locationX>
        <locationY>674</locationY>
        <connector>
            <targetReference>Get_Work_Step_Rec</targetReference>
        </connector>
        <flowName>BLN_ShiftCICOManagement</flowName>
        <inputAssignments>
            <name>UserId</name>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Check_Clock_In</name>
        <label>Check Clock In</label>
        <locationX>875</locationX>
        <locationY>350</locationY>
        <connector>
            <targetReference>Clock_In_Check</targetReference>
        </connector>
        <flowName>BLN_ClockInCheck</flowName>
        <inputAssignments>
            <name>Id</name>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>UserId</name>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>IsCheckedIn</assignToReference>
            <name>OutputOfTheFlow</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>Upsell_VAPs</name>
        <label>Upsell VAPs</label>
        <locationX>501</locationX>
        <locationY>4646</locationY>
        <connector>
            <targetReference>Call_Aperture_Condition</targetReference>
        </connector>
        <flowName>BLN_UpsellVAPS</flowName>
        <inputAssignments>
            <name>Id</name>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>UserId</name>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Upsell_VAPS_For_Branch_Flow_1</name>
        <label>Upsell VAPS For Branch Flow 1</label>
        <locationX>765</locationX>
        <locationY>4646</locationY>
        <connector>
            <targetReference>Call_Aperture_Condition</targetReference>
        </connector>
        <flowName>BLN_UpsellVAPSForBranch</flowName>
        <inputAssignments>
            <name>Id</name>
            <value>
                <elementReference>woliRecord.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>UserId</name>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <variables>
        <name>addIDS</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>CaseBoolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>CurrentSR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
    <variables>
        <description>CurrentWorkStep Record</description>
        <name>CurrentWorkStep</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkStep</objectType>
    </variables>
    <variables>
        <name>FirstPR</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>FlowStartTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Id</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>IsCheckedIn</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>isWorkStepDone</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>LEVAPSPR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>ListforUreathene</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>LoopElementPR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>LoopElementPRId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NewPC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductConsumed</objectType>
    </variables>
    <variables>
        <name>ProdConsumedList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductConsumed</objectType>
    </variables>
    <variables>
        <name>ProductChangeType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ProductConsumedRec</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductConsumed</objectType>
    </variables>
    <variables>
        <name>ProductItemRec</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductItem</objectType>
    </variables>
    <variables>
        <description>Collection variable to store Product Required Records</description>
        <name>ProductReqRecs</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>Quantity</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>SelectedChoices</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SelectedPR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>SelectedPRIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SizeOfPCList</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>SizeOfPRList</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>STRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceTerritory</objectType>
    </variables>
    <variables>
        <name>UpdatedPR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>UpdatedPRList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>UserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>VanLocationRec</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Location</objectType>
    </variables>
    <variables>
        <name>VAPSPRRecs</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductRequired</objectType>
    </variables>
    <variables>
        <name>woliRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>WorkOrderLineItem</objectType>
    </variables>
    <variables>
        <name>WorkOrder</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrder</objectType>
    </variables>
</Flow>
