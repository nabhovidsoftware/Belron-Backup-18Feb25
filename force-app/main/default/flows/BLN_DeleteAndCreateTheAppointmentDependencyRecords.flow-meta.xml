<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Error_Handling_for_Scheduling_and_IsBranch</name>
        <label>Error Handling for Scheduling and IsBranch</label>
        <locationX>578</locationX>
        <locationY>2819</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Error_Handling_for_Status_Open_or_Pending</name>
        <label>Error Handling for Status Open or Pending</label>
        <locationX>2382</locationX>
        <locationY>1679</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Assignement_Service_Appointment_2</name>
        <label>Assignement Service Appointment 2</label>
        <locationX>2338</locationX>
        <locationY>1079</locationY>
        <assignmentItems>
            <assignToReference>serviceAppointmentTwo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SA_Iteration.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SA_Iteration</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignement_Service_Appoitment_1</name>
        <label>Assignement Service Appoitment 1</label>
        <locationX>2602</locationX>
        <locationY>1079</locationY>
        <assignmentItems>
            <assignToReference>servcieAppointmentOne</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SA_Iteration.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SA_Iteration</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_On_Assist_Based_SA</name>
        <label>Assignment On Assist Based SA</label>
        <locationX>534</locationX>
        <locationY>2219</locationY>
        <assignmentItems>
            <assignToReference>AssistSAUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>serviceAppointmentTwo</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AssistSAUpdate.ArrivalWindowStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ArriveStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AssistSAUpdate.ArrivalWindowEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ArriveEndTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_On_2SA_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Schedule_Arrival_Time</name>
        <label>Copy 1 of Assign Schedule Arrival Time</label>
        <locationX>798</locationX>
        <locationY>1619</locationY>
        <assignmentItems>
            <assignToReference>ArriveStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_SA_Iteration.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ArriveEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_SA_Iteration.ArrivalWindowEndTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_SA_Iteration</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assignement_Service_Appointment_2</name>
        <label>Copy 1 of Assignement Service Appointment 2</label>
        <locationX>534</locationX>
        <locationY>1511</locationY>
        <assignmentItems>
            <assignToReference>serviceAppointmentTwo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_SA_Iteration.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_SA_Iteration</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assignement_Service_Appoitment_1</name>
        <label>Copy 1 of Assignement Service Appoitment 1</label>
        <locationX>798</locationX>
        <locationY>1511</locationY>
        <assignmentItems>
            <assignToReference>servcieAppointmentOne</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_SA_Iteration.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_Assign_Schedule_Arrival_Time</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Count_work_line_item</name>
        <label>Count work line item</label>
        <locationX>1991</locationX>
        <locationY>539</locationY>
        <assignmentItems>
            <assignToReference>CountWOLI</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_work_order_line_item_multiple</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Service_Appointment_Status_Change</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Assist_Based_SA_Decision</name>
        <label>Assist Based SA Decision</label>
        <locationX>666</locationX>
        <locationY>2111</locationY>
        <defaultConnector>
            <targetReference>Loop_On_2SA_Record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Assist_based_SA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_On_2SA_Record.WorkType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Assist</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignment_On_Assist_Based_SA</targetReference>
            </connector>
            <label>Assist based SA</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Get_Element_In_Null</name>
        <label>Check Get Element In Null</label>
        <locationX>1073</locationX>
        <locationY>863</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>SA_Depedancies_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_SA_Dependancy_Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>check_status_open_to_schdule</targetReference>
            </connector>
            <label>SA Depedancies Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Record_status_Open</name>
        <label>Check Record status Open</label>
        <locationX>2250</locationX>
        <locationY>1355</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>check_Status_Open</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>None</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Appointment_Dependancy</targetReference>
            </connector>
            <label>check Status Open</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_status_open_to_schdule</name>
        <label>check status open to schdule</label>
        <locationX>776</locationX>
        <locationY>971</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_Status_Open_to_Schdule_01</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>None</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delete_Record_SA_Dependencies</targetReference>
            </connector>
            <label>Check Status Open to Schdule</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckStart_Time_And_End_Time_Null</name>
        <label>CheckStart Time And End Time Null</label>
        <locationX>446</locationX>
        <locationY>2495</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_Null_Time</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ArriveStartTime</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>ArriveEndTime</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Assist_Sa</targetReference>
            </connector>
            <label>Check Null Time</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Service_Appointment_Decision</name>
        <label>Copy 1 of Service Appointment Decision</label>
        <locationX>798</locationX>
        <locationY>1403</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_SA_Iteration</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_worktype_Assist_and_its_associated_SA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copy_1_of_SA_Iteration.WorkType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Assist</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Copy_1_of_SA_Iteration.ParentRecordId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Copy_1_of_SA_Iteration.BLN_WorkOrderLineItem__r.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assignement_Service_Appointment_2</targetReference>
            </connector>
            <label>Copy 1 of worktype Assist and its associated SA</label>
        </rules>
        <rules>
            <name>Copy_1_of_Main_Appointment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copy_1_of_SA_Iteration.WorkType.BLN_IsMainJob__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Copy_1_of_SA_Iteration.ParentRecordId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Copy_1_of_SA_Iteration.BLN_WorkOrderLineItem__r.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assignement_Service_Appoitment_1</targetReference>
            </connector>
            <label>Copy 1 of Main Appointment</label>
        </rules>
    </decisions>
    <decisions>
        <name>Service_Appointment_Decision</name>
        <label>Service Appointment Decision</label>
        <locationX>2602</locationX>
        <locationY>971</locationY>
        <defaultConnector>
            <targetReference>SA_Iteration</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>worktype_Assist_and_its_associated_SA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SA_Iteration.WorkType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Assist</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>SA_Iteration.ParentRecordId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>SA_Iteration.BLN_WorkOrderLineItem__r.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignement_Service_Appointment_2</targetReference>
            </connector>
            <label>worktype Assist and its associated SA</label>
        </rules>
        <rules>
            <name>Main_Appointment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SA_Iteration.WorkType.BLN_IsMainJob__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>SA_Iteration.ParentRecordId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>SA_Iteration.BLN_WorkOrderLineItem__r.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignement_Service_Appoitment_1</targetReference>
            </connector>
            <label>Main Appointment</label>
        </rules>
    </decisions>
    <decisions>
        <name>Service_Appointment_Status_Change</name>
        <label>Service Appointment Status Change</label>
        <locationX>1991</locationX>
        <locationY>647</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Status_Changed_To_Scheduled_And_IsBranch_True</name>
            <conditionLogic>1 AND 2 AND 3 AND 4 AND 5 AND 6 AND 7</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.BLN_IsBranchAppointment__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.WorkType.Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Assist</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.WorkType.Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Stock Collect</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CountWOLI</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Update_Assist_Sa</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_SA_Dependancy_Record</targetReference>
            </connector>
            <label>Status Changed To Scheduled And IsBranch True</label>
        </rules>
        <rules>
            <name>SA_Status_Chnaged_From_Schdule_To_Open_Or_Pending</name>
            <conditionLogic>(1 OR 2 ) AND 3 AND 4 AND 5 AND 6 AND 7 AND 8 AND 9</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>None</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.BLN_IsBranchAppointment__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CountWOLI</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.WorkType.Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Assist</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.WorkType.Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Stock Collect</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Create_Appointment_Dependancy</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_ServiceAppointment_Record</targetReference>
            </connector>
            <label>SA Status Chnaged From Schdule To Open Or Pending</label>
        </rules>
    </decisions>
    <description>FOUK-630 =&gt; Delete And Create  Appointment Dependency Records</description>
    <environments>Default</environments>
    <formulas>
        <name>CurrentUserId</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <interviewLabel>Delete  And Create The Appointment Dependency Records {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Delete  And Create The Appointment Dependency Records</label>
    <loops>
        <name>Copy_1_of_SA_Iteration</name>
        <label>Copy 1 of SA Iteration</label>
        <locationX>446</locationX>
        <locationY>1295</locationY>
        <collectionReference>Copy_1_of_get_ServiceAppointment_Record</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Copy_1_of_Service_Appointment_Decision</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>GetServiceApoointmentRecord</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_On_2SA_Record</name>
        <label>Loop On SA Record</label>
        <locationX>446</locationX>
        <locationY>2003</locationY>
        <collectionReference>GetServiceApoointmentRecord</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assist_Based_SA_Decision</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CheckStart_Time_And_End_Time_Null</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>SA_Iteration</name>
        <label>SA Iteration</label>
        <locationX>2250</locationX>
        <locationY>863</locationY>
        <collectionReference>get_ServiceAppointment_Record</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Service_Appointment_Decision</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_Record_status_Open</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Appointment_Dependancy</name>
        <label>Create Appointment Dependancy</label>
        <locationX>1854</locationX>
        <locationY>1463</locationY>
        <faultConnector>
            <targetReference>Error_Exception_logs_for_Status_Open_or_Pending</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>FSL__Dependency__c</field>
            <value>
                <stringValue>Same Start</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FSL__Service_Appointment_1__c</field>
            <value>
                <elementReference>servcieAppointmentOne</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FSL__Service_Appointment_2__c</field>
            <value>
                <elementReference>serviceAppointmentTwo</elementReference>
            </value>
        </inputAssignments>
        <object>FSL__Time_Dependency__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Error_Exception_logs_for_Status_Open_or_Pending</name>
        <label>Error Exception logs for Status Open or Pending</label>
        <locationX>2118</locationX>
        <locationY>1571</locationY>
        <faultConnector>
            <targetReference>Error_Handling_for_Status_Open_or_Pending</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>CurrentUserId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_DeleteAndCreateTheAppointmentDependencyRecords</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <stringValue>Exception</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Create_Appointment_Dependancy</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Error_Exception_logs_for_Status_scheduling_and_IsBranch</name>
        <label>Error Exception logs for Status scheduling and IsBranch</label>
        <locationX>314</locationX>
        <locationY>2711</locationY>
        <faultConnector>
            <targetReference>Error_Handling_for_Scheduling_and_IsBranch</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>CurrentUserId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_DeleteAndCreateTheAppointmentDependencyRecords</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <stringValue>Exception</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Update_Assist_Sa</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordDeletes>
        <name>Delete_Record_SA_Dependencies</name>
        <label>Delete Record SA Dependencies</label>
        <locationX>446</locationX>
        <locationY>1079</locationY>
        <connector>
            <targetReference>Copy_1_of_get_ServiceAppointment_Record</targetReference>
        </connector>
        <inputReference>Get_SA_Dependancy_Record</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>Copy_1_of_get_ServiceAppointment_Record</name>
        <label>Copy 1 of get ServiceAppointment Record</label>
        <locationX>446</locationX>
        <locationY>1187</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_SA_Iteration</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_WorkOrderNumber__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.BLN_WorkOrderNumber__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceAppointment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_SA_Dependancy_Record</name>
        <label>Get SA Dependancy Record</label>
        <locationX>1073</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Get_Element_In_Null</targetReference>
        </connector>
        <filterLogic>(1 OR 2 ) AND 3</filterLogic>
        <filters>
            <field>FSL__Service_Appointment_1__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>FSL__Service_Appointment_2__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>FSL__Dependency__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Same Start</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>FSL__Time_Dependency__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_ServiceAppointment_Record</name>
        <label>get ServiceAppointment Record</label>
        <locationX>2250</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SA_Iteration</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_WorkOrderNumber__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.BLN_WorkOrderNumber__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceAppointment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_work_order_line_item_multiple</name>
        <label>Get work order line item multiple</label>
        <locationX>1991</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Count_work_line_item</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Getworkodercount.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>WorkOrderLineItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetServiceApoointmentRecord</name>
        <label>GetServiceAppointmentRecord</label>
        <locationX>446</locationX>
        <locationY>1895</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_On_2SA_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_WorkOrderNumber__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.BLN_WorkOrderNumber__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceAppointment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Getworkodercount</name>
        <label>Getworkodercount</label>
        <locationX>1991</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_work_order_line_item_multiple</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.BLN_WorkOrderNumber__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Assist_Sa</name>
        <label>Update Assist Sa</label>
        <locationX>50</locationX>
        <locationY>2603</locationY>
        <faultConnector>
            <targetReference>Error_Exception_logs_for_Status_scheduling_and_IsBranch</targetReference>
        </faultConnector>
        <inputReference>AssistSAUpdate</inputReference>
    </recordUpdates>
    <start>
        <locationX>1865</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Getworkodercount</targetReference>
        </connector>
        <filterFormula>{!$Permission.BLN_BypassFlows} = False</filterFormula>
        <object>ServiceAppointment</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>ArriveEndTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ArriveStartTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AssistBasedSaId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>AssistSAIdStore</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>AssistSAUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>CheckSARecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CountWOLI</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>MainSAStatusStore</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SADependacyID</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FSL__Time_Dependency__c</objectType>
    </variables>
    <variables>
        <name>servcieAppointmentOne</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>serviceAppointmentTwo</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>storeAssistSaId</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
</Flow>
