<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>BLN_ApexError</name>
        <label>Apex Error</label>
        <locationX>964</locationX>
        <locationY>1203</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>BLN_ApexErrorForAccountUpdate</name>
        <label>Apex Error For Account Update</label>
        <locationX>732</locationX>
        <locationY>1080</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>BLN_ApexErrorForCaseUpdate</name>
        <label>Apex Error For Case Update</label>
        <locationX>314</locationX>
        <locationY>4500</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>BLN_ApexErrorForCPTCCreation</name>
        <label>Apex Error For CPTC Creation</label>
        <locationX>578</locationX>
        <locationY>4392</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>BLN_ApexErrorForDUPBooking</name>
        <label>Apex Error For DUP Booking</label>
        <locationX>2976</locationX>
        <locationY>3312</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>BLN_ApexErrorForDUPMarketing</name>
        <label>Apex Error For DUP Marketing</label>
        <locationX>2712</locationX>
        <locationY>3420</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>BLN_ApexErrorForUpdateCaseStatus</name>
        <label>Apex Error For Update Case Status</label>
        <locationX>3768</locationX>
        <locationY>1380</locationY>
        <actionName>BLN_FlowExceptionLogger</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>excmessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputParameters>
        <nameSegment>BLN_FlowExceptionLogger</nameSegment>
    </actionCalls>
    <apiVersion>59.0</apiVersion>
    <assignments>
        <name>AssignMembers</name>
        <label>AssignMembers</label>
        <locationX>3856</locationX>
        <locationY>864</locationY>
        <assignmentItems>
            <assignToReference>MembersIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>LoopMembers.UserOrGroupId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopMembers</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_of_Booking_CPTC</name>
        <label>Assignment of Booking CPTC</label>
        <locationX>446</locationX>
        <locationY>3744</locationY>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Email</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EmailCPTCBookingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BookingConsentPrivacystatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_booking_records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailBookingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SMS</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SMSCPTCBookingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BookingConsentPrivacystatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_booking_records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSBookingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Phone</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PhoneCPTCBookingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BookingConsentPrivacystatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_booking_records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneBookingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>check_if_DUP_marketing_record_is_not_null</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_of_Marketing_CPTC</name>
        <label>Assignment of Marketing CPTC</label>
        <locationX>50</locationX>
        <locationY>3960</locationY>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Email</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EmailCPTCMarketingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EmailCPTCMarketingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsenttoDateMarketingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OptIn</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_Marketing_Records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMarketingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SMS</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SMSCPTCMarketingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsenttoDateMarketingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OptIn</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_Marketing_Records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSMarketingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Phone</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PhoneCPTCMaketingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsenttoDateMarketingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OptIn</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_Marketing_Records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PhoneMarketingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Post</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PostCPTCMarketingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsenttoDateMarketingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OptIn</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_DUP_Marketing_Records.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PostMarketingCPTC.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividual.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Collection_list_of_CPTC</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Collection_list_of_CPTC</name>
        <label>Collection list of CPTC</label>
        <locationX>50</locationX>
        <locationY>4068</locationY>
        <assignmentItems>
            <assignToReference>ListOfCPTC</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>EmailBookingCPTC</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ListOfCPTC</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>PhoneBookingCPTC</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ListOfCPTC</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>SMSBookingCPTC</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CPTC</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_Email_CPTC_Assignment</name>
        <label>Create Email CPTC Assignment</label>
        <locationX>1380</locationX>
        <locationY>2664</locationY>
        <assignmentItems>
            <assignToReference>CPTC_var.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_AOBC_DUP.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividualId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BookingConsentPrivacystatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Email</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EmailCPTCBookingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.InterviewStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CptcList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CPTC_var</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_SMS_CPTC_Assignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_Phone_CPTC_Assignment</name>
        <label>Create Phone CPTC Assignment</label>
        <locationX>1381</locationX>
        <locationY>2880</locationY>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_AOBC_DUP.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividualId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BookingConsentPrivacystatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Phone</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PhoneCPTCBookingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.InterviewStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CPTC_var_phone.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CptcList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CPTC_var_phone</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_CPTC_records</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_SMS_CPTC_Assignment</name>
        <label>Create SMS CPTC Assignment</label>
        <locationX>1381</locationX>
        <locationY>2772</locationY>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.DataUsePurposeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_AOBC_DUP.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.PartyId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividualId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BookingConsentPrivacystatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.BLN_ContactChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SMS</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SMSCPTCBookingName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.InterviewStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Cptc_var_sms.BLN_ChannelType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Web</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CptcList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Cptc_var_sms</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Phone_CPTC_Assignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Status_Opt_IN</name>
        <label>Set Status Opt IN</label>
        <locationX>2096</locationX>
        <locationY>1728</locationY>
        <assignmentItems>
            <assignToReference>Iterate_CPTC_Records.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OptIn</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Iterate_CPTC_Records.EffectiveFrom</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.InterviewStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Iterate_CPTC_Records.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Store_CPTC</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Status_OptOut</name>
        <label>Set Status OptOut</label>
        <locationX>2360</locationX>
        <locationY>1728</locationY>
        <assignmentItems>
            <assignToReference>Iterate_CPTC_Records.PrivacyConsentStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OptOut</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Iterate_CPTC_Records.EffectiveTo</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.InterviewStartTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Store_CPTC</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Store_CPTC</name>
        <label>Store CPTC</label>
        <locationX>2228</locationX>
        <locationY>1920</locationY>
        <assignmentItems>
            <assignToReference>AobcCptcList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_CPTC_Records</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_CPTC_Records</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_CPTC_records</name>
        <label>Part ID Check of CPTC records</label>
        <locationX>1381</locationX>
        <locationY>3528</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_not_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_CPTC_Records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_booking_record_is_not_null</targetReference>
            </connector>
            <label>If Party Id not found</label>
        </rules>
        <rules>
            <name>If_Party_Id_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_CPTC_Records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Iterate_over_CPTC_Records</targetReference>
            </connector>
            <label>If Party Id found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Data_use_Purpose_and_Channel_Type_value</name>
        <label>Check Data use Purpose and Channel Type value</label>
        <locationX>1942</locationX>
        <locationY>3744</locationY>
        <defaultConnector>
            <targetReference>Iterate_over_CPTC_Records</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_DUP_and_Channel_Type</name>
            <conditionLogic>(1 AND 2) OR (1 AND 3) OR (1 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>Get_DUP_booking_records.BLN_ConsentPurpose__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AOBC</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_over_CPTC_Records.BLN_ContactChannelType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SMS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_over_CPTC_Records.BLN_ContactChannelType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_over_CPTC_Records.BLN_ContactChannelType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Phone</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_the_CPTC_records_found</targetReference>
            </connector>
            <label>Check DUP and Channel Type</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_DataUsePurpose_and_ChannelTypeValue</name>
        <label>Check DataUsePurpose and ChannelTypeValue</label>
        <locationX>2426</locationX>
        <locationY>1512</locationY>
        <defaultConnector>
            <targetReference>Iterate_CPTC_Records</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_DUP_and_ChannelType</name>
            <conditionLogic>(1 AND 2) OR (1 AND 3) OR (1 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>Get_DUP_booking_records2.BLN_ConsentPurpose__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AOBC</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_CPTC_Records.BLN_ContactChannelType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SMS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_CPTC_Records.BLN_ContactChannelType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_CPTC_Records.BLN_ContactChannelType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Phone</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Optin_Is_OptOut</targetReference>
            </connector>
            <label>Check DUP and ChannelType</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_get_recovery_queue_is_not_null</name>
        <label>Check get recovery queue is not null</label>
        <locationX>4296</locationX>
        <locationY>432</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>recovery_queue_is_not_null_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_recovery_queue</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetGroupMembers</targetReference>
            </connector>
            <label>recovery queue is not null check</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_group_member_is_not_null</name>
        <label>Check group member is not null</label>
        <locationX>4032</locationX>
        <locationY>648</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>group_member_is_not_null_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetGroupMembers</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopMembers</targetReference>
            </connector>
            <label>group member is not null check</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_booking_record_is_not_null</name>
        <label>Check if booking record is not null</label>
        <locationX>776</locationX>
        <locationY>3636</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Null_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_DUP_booking_records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignment_of_Booking_CPTC</targetReference>
            </connector>
            <label>Null check</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_if_DUP_marketing_record_is_not_null</name>
        <label>check if DUP marketing record is not null</label>
        <locationX>446</locationX>
        <locationY>3852</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>DUP_marketing_record_is_not_null_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_DUP_Marketing_Records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignment_of_Marketing_CPTC</targetReference>
            </connector>
            <label>DUP marketing record is not null check</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_related_acc_record_is_not_null</name>
        <label>Check if related acc record is not null</label>
        <locationX>2310</locationX>
        <locationY>432</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>if_account_id_not_null_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Related_Account_Records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_AOBC_DUP</targetReference>
            </connector>
            <label>if account id not null check</label>
        </rules>
    </decisions>
    <decisions>
        <name>checkGETCPTCisNull</name>
        <label>checkGETCPTCisNull</label>
        <locationX>2140</locationX>
        <locationY>1296</locationY>
        <defaultConnector>
            <targetReference>Create_Email_CPTC_Assignment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>GETCPTCisNull</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetCPTC</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Iterate_CPTC_Records</targetReference>
            </connector>
            <label>GETCPTCisNull</label>
        </rules>
    </decisions>
    <decisions>
        <name>decision_to_check_Case_Account_PersonIndividualId</name>
        <label>decision to check Case.Account.PersonIndividualId</label>
        <locationX>1381</locationX>
        <locationY>648</locationY>
        <defaultConnector>
            <targetReference>IndividualPresentOnAccount</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Case_Account_PersonIndividualId</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Related_Account_Records.PersonIndividual.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateIndividualRecord</targetReference>
            </connector>
            <label>Case.Account.PersonIndividualId</label>
        </rules>
    </decisions>
    <decisions>
        <name>Decision_to_check_ownership_of_Case_lie_with_Recovery_team</name>
        <label>Decision to check ownership of Case lie with Recovery team</label>
        <locationX>3768</locationX>
        <locationY>1056</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_Conditions</name>
            <conditionLogic>1 AND 2 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.BLN_AOBCPhoneSMSEmail__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed-Lost</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner:Group.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_recovery_queue.DeveloperName</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>MembersIds</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>$Record.OwnerId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Case_Status</targetReference>
            </connector>
            <label>Check Conditions</label>
        </rules>
    </decisions>
    <decisions>
        <name>IndividualPresentOnAccount</name>
        <label>IndividualPresentOnAccount</label>
        <locationX>2294</locationX>
        <locationY>756</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Related_Account_Records.PersonIndividualId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetIndividualOfPersonAccount</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Optin_Is_OptOut</name>
        <label>Is Optin / Is OptOut</label>
        <locationX>2228</locationX>
        <locationY>1620</locationY>
        <defaultConnector>
            <targetReference>Set_Status_OptOut</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Opt_in</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.BLN_AbandonedOnlineBookingConsent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Status_Opt_IN</targetReference>
            </connector>
            <label>Opt in</label>
        </rules>
    </decisions>
    <description>FOUK-4019 This flows is used for booking consent on case creation.</description>
    <environments>Default</environments>
    <formulas>
        <name>BookingConsentPrivacystatus</name>
        <dataType>String</dataType>
        <expression>IF({!$Record.BLN_AbandonedOnlineBookingConsent__c}, &apos;OptIn&apos;, &apos;OptOut&apos;)</expression>
    </formulas>
    <formulas>
        <name>ConsentToDateBookingDUP</name>
        <dataType>Date</dataType>
        <expression>{!$Record.CreatedDate}+{!Get_AOBC_DUP.BLN_ConsentValidityInDays__c}</expression>
    </formulas>
    <formulas>
        <name>ConsenttoDateMarketingDUP</name>
        <dataType>Date</dataType>
        <expression>TODAY()+{!Get_DUP_Marketing_Records.BLN_ConsentValidityInDays__c}</expression>
    </formulas>
    <formulas>
        <name>EmailCPTCBookingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_AOBC_DUP.BLN_ConsentPurpose__c})+&apos; : &apos;+&apos;Email&apos;</expression>
    </formulas>
    <formulas>
        <name>EmailCPTCMarketingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_DUP_Marketing_Records.BLN_ConsentPurpose__c})+&apos; : &apos;+TEXT({!EmailMarketingCPTC.BLN_ContactChannelType__c})</expression>
    </formulas>
    <formulas>
        <name>PhoneCPTCBookingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_AOBC_DUP.BLN_ConsentPurpose__c})+&apos; : &apos;+&apos;Phone&apos;</expression>
    </formulas>
    <formulas>
        <name>PhoneCPTCMaketingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_DUP_Marketing_Records.BLN_ConsentPurpose__c})+&apos; : &apos;+TEXT({!PhoneMarketingCPTC.BLN_ContactChannelType__c})</expression>
    </formulas>
    <formulas>
        <name>PostCPTCMarketingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_DUP_Marketing_Records.BLN_ConsentPurpose__c})+&apos; : &apos;+TEXT({!PostMarketingCPTC.BLN_ContactChannelType__c})</expression>
    </formulas>
    <formulas>
        <name>SMSCPTCBookingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_AOBC_DUP.BLN_ConsentPurpose__c})+&apos; : &apos;+&apos;SMS&apos;</expression>
    </formulas>
    <formulas>
        <name>SMSCPTCMarketingName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Account.FirstName}+&apos; &apos;+{!$Record.Account.LastName}+&apos; : &apos;+TEXT({!Get_DUP_Marketing_Records.BLN_ConsentPurpose__c})+&apos; : &apos;+TEXT({!SMSMarketingCPTC.BLN_ContactChannelType__c})</expression>
    </formulas>
    <interviewLabel>CreateBookingCaseConsents {!$Flow.CurrentDateTime}</interviewLabel>
    <label>CreateBookingCaseConsents</label>
    <loops>
        <name>Iterate_CPTC_Records</name>
        <label>Iterate  CPTC Records</label>
        <locationX>2008</locationX>
        <locationY>1404</locationY>
        <collectionReference>GetCPTC</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_DataUsePurpose_and_ChannelTypeValue</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_the_CPTC_records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_over_CPTC_Records</name>
        <label>Iterate over CPTC Records</label>
        <locationX>1722</locationX>
        <locationY>3636</locationY>
        <collectionReference>Get_CPTC_Records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Data_use_Purpose_and_Channel_Type_value</targetReference>
        </nextValueConnector>
    </loops>
    <loops>
        <name>LoopMembers</name>
        <label>LoopMembers</label>
        <locationX>3768</locationX>
        <locationY>756</locationY>
        <collectionReference>GetGroupMembers</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AssignMembers</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Decision_to_check_ownership_of_Case_lie_with_Recovery_team</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>BLN_CreateExceptionRecord</name>
        <label>Create Exception Record</label>
        <locationX>996</locationX>
        <locationY>864</locationY>
        <connector>
            <targetReference>BLN_ApexError</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>CreateIndividualRecord</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>BLN_CreateExceptionRecordForAccountUpdate</name>
        <label>Create Exception Record For Account Update</label>
        <locationX>732</locationX>
        <locationY>972</locationY>
        <connector>
            <targetReference>BLN_ApexErrorForAccountUpdate</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Update_Individual_on_Account</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>BLN_CreateExceptionRecordForCaseUpdate</name>
        <label>Create Exception Record For Case Update</label>
        <locationX>314</locationX>
        <locationY>4392</locationY>
        <connector>
            <targetReference>BLN_ApexErrorForCaseUpdate</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Update_AOBC_End_Date_on_Case</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>BLN_CreateExceptionRecordForCPTCCreation</name>
        <label>Create Exception Record For CPTC Creation</label>
        <locationX>578</locationX>
        <locationY>4284</locationY>
        <connector>
            <targetReference>BLN_ApexErrorForCPTCCreation</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>CPTC</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>BLN_CreateExceptionRecordForDUPBooking</name>
        <label>Create Exception Record For DUP Booking</label>
        <locationX>2976</locationX>
        <locationY>3204</locationY>
        <connector>
            <targetReference>BLN_ApexErrorForDUPBooking</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Get_DUP_booking_records.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>BLN_CreateExceptionRecordForDUPMarketing</name>
        <label>Create Exception Record For DUP Marketing</label>
        <locationX>2712</locationX>
        <locationY>3312</locationY>
        <connector>
            <targetReference>BLN_ApexErrorForDUPMarketing</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Get_DUP_Marketing_Records.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>BLN_CreateExceptionRecordForUpdateCaseStatus</name>
        <label>Create Exception Record For Update Case Status</label>
        <locationX>3768</locationX>
        <locationY>1272</locationY>
        <connector>
            <targetReference>BLN_ApexErrorForUpdateCaseStatus</targetReference>
        </connector>
        <inputAssignments>
            <field>BLN_CurrentUser__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_EntityName__c</field>
            <value>
                <stringValue>BLN_CreateBookingCaseConsents</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_ErrorMessage__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_LogType__c</field>
            <value>
                <elementReference>$Label.BLN_ExceptionValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_MethodStep__c</field>
            <value>
                <elementReference>Update_Case_Status</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BLN_RecordIdIdentifier__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>BLN_FlowException__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>CPTC</name>
        <label>CPTC</label>
        <locationX>50</locationX>
        <locationY>4176</locationY>
        <connector>
            <targetReference>Update_AOBC_End_Date_on_Case</targetReference>
        </connector>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecordForCPTCCreation</targetReference>
        </faultConnector>
        <inputReference>ListOfCPTC</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_CPTC_records</name>
        <label>Create CPTC records</label>
        <locationX>1381</locationX>
        <locationY>2988</locationY>
        <inputReference>CptcList</inputReference>
    </recordCreates>
    <recordCreates>
        <name>CreateIndividualRecord</name>
        <label>CreateIndividualRecord</label>
        <locationX>468</locationX>
        <locationY>756</locationY>
        <connector>
            <targetReference>Update_Individual_on_Account</targetReference>
        </connector>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecord</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>$Record.Account.FirstName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>$Record.Account.LastName</elementReference>
            </value>
        </inputAssignments>
        <object>Individual</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_AOBC_DUP</name>
        <label>Get AOBC DUP</label>
        <locationX>1381</locationX>
        <locationY>540</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>decision_to_check_Case_Account_PersonIndividualId</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_ConsentPurpose__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AOBC</stringValue>
            </value>
        </filters>
        <filters>
            <field>BLN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DataUsePurpose</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CPTC_Records</name>
        <label>Get CPTC Records</label>
        <locationX>1381</locationX>
        <locationY>3420</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_CPTC_records</targetReference>
        </connector>
        <filterLogic>(1 OR 2) AND 3</filterLogic>
        <filters>
            <field>PartyId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.PersonIndividualId</elementReference>
            </value>
        </filters>
        <filters>
            <field>PartyId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CreateIndividualRecord</elementReference>
            </value>
        </filters>
        <filters>
            <field>DataUsePurposeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_AOBC_DUP.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ContactPointTypeConsent</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_DUP_booking_records</name>
        <label>Get DUP booking records</label>
        <locationX>1381</locationX>
        <locationY>3096</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_DUP_Marketing_Records</targetReference>
        </connector>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecordForDUPBooking</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_ConsentPurpose__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AOBC</stringValue>
            </value>
        </filters>
        <filters>
            <field>BLN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DataUsePurpose</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_DUP_booking_records2</name>
        <label>Get DUP booking records2</label>
        <locationX>2140</locationX>
        <locationY>972</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_DUP_Marketing_Records2</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_ConsentPurpose__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AOBC</stringValue>
            </value>
        </filters>
        <filters>
            <field>BLN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DataUsePurpose</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_DUP_Marketing_Records</name>
        <label>Get DUP Marketing Records</label>
        <locationX>1381</locationX>
        <locationY>3204</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Individuals</targetReference>
        </connector>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecordForDUPMarketing</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_ConsentPurpose__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Marketing</stringValue>
            </value>
        </filters>
        <filters>
            <field>BLN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DataUsePurpose</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_DUP_Marketing_Records2</name>
        <label>Get DUP Marketing Records2</label>
        <locationX>2140</locationX>
        <locationY>1080</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetCPTC</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>BLN_ConsentPurpose__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Marketing</stringValue>
            </value>
        </filters>
        <filters>
            <field>BLN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DataUsePurpose</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Individuals</name>
        <label>Get Individuals</label>
        <locationX>1381</locationX>
        <locationY>3312</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_CPTC_Records</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FirstName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.FirstName</elementReference>
            </value>
        </filters>
        <filters>
            <field>LastName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.LastName</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Individual</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_recovery_queue</name>
        <label>Get recovery queue</label>
        <locationX>4296</locationX>
        <locationY>324</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_get_recovery_queue_is_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>BLN_RecoveryTeamQueue</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Related_Account_Records</name>
        <label>Get Related Account Records</label>
        <locationX>2310</locationX>
        <locationY>324</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_if_related_acc_record_is_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetCPTC</name>
        <label>GetCPTC</label>
        <locationX>2140</locationX>
        <locationY>1188</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>checkGETCPTCisNull</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>PartyId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetIndividualOfPersonAccount.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>DataUsePurposeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_AOBC_DUP.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ContactPointTypeConsent</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetGroupMembers</name>
        <label>GetGroupMembers</label>
        <locationX>4032</locationX>
        <locationY>540</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_group_member_is_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>GroupId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_recovery_queue.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>UserOrGroupId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>GroupMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetIndividualOfPersonAccount</name>
        <label>GetIndividualOfPersonAccount</label>
        <locationX>2140</locationX>
        <locationY>864</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_DUP_booking_records2</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Related_Account_Records.PersonIndividualId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Individual</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_AOBC_End_Date_on_Case</name>
        <label>Update AOBC End Date on Case</label>
        <locationX>50</locationX>
        <locationY>4284</locationY>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecordForCaseUpdate</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>BLN_AOBCEndDate__c</field>
            <value>
                <elementReference>ConsentToDateBookingDUP</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_Status</name>
        <label>Update Case Status</label>
        <locationX>3504</locationX>
        <locationY>1164</locationY>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecordForUpdateCaseStatus</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Closed-Lost</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Individual_on_Account</name>
        <label>Update Individual on Account</label>
        <locationX>468</locationX>
        <locationY>864</locationY>
        <connector>
            <targetReference>Create_Email_CPTC_Assignment</targetReference>
        </connector>
        <faultConnector>
            <targetReference>BLN_CreateExceptionRecordForAccountUpdate</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>PersonIndividualId</field>
            <value>
                <elementReference>CreateIndividualRecord</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record.Account</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_the_CPTC_records</name>
        <label>Update the CPTC records</label>
        <locationX>2008</locationX>
        <locationY>2196</locationY>
        <inputReference>AobcCptcList</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_the_CPTC_records_found</name>
        <label>Update the CPTC records found</label>
        <locationX>1810</locationX>
        <locationY>3852</locationY>
        <connector>
            <targetReference>Iterate_over_CPTC_Records</targetReference>
        </connector>
        <inputReference>Iterate_over_CPTC_Records</inputReference>
    </recordUpdates>
    <start>
        <locationX>3177</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>Get_Related_Account_Records</targetReference>
        </connector>
        <filterFormula>AND(ISPICKVAL({!$Record.Origin}, &apos;Web&apos;), NOT(ISPICKVAL({!$Record.Status}, &apos;Closed-Lost&apos;)),
OR(ISCHANGED({!$Record.BLN_AbandonedOnlineBookingConsent__c}),
{!$Record.BLN_AbandonedOnlineBookingConsent__c},
{!$Record.BLN_PreferredMethodOfContact__c}), 
NOT({!$Permission.BLN_BypassFlows}))</filterFormula>
        <object>Case</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <scheduledPaths>
            <name>schedule_Path_to_execute_1_Day_after_AOBC_End_Date</name>
            <connector>
                <targetReference>Get_recovery_queue</targetReference>
            </connector>
            <label>schedule Path to execute 1 Day after AOBC End Date</label>
            <offsetNumber>1</offsetNumber>
            <offsetUnit>Days</offsetUnit>
            <recordField>BLN_AOBCEndDate__c</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>AobcCptcList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>CPTC_var</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>CPTC_var_phone</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>Cptc_var_sms</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>CptcList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>cptcRecords</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>EmailBookingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>EmailMarketingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>ListOfCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>MembersIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PhoneBookingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>PhoneMarketingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>PostMarketingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>SMSBookingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>SMSMarketingCPTC</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ContactPointTypeConsent</objectType>
    </variables>
    <variables>
        <name>TypeOfConsentList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
